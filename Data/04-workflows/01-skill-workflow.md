# Skill 개발 워크플로우

## 개요

이 문서는 Claude Code Skill을 처음부터 개발하고 배포하는 전체 워크플로우를 설명합니다.

## 5단계 개발 프로세스

```
┌─────────────────────────────────────────────────────────────┐
│                   Skill 개발 워크플로우                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐     │
│  │ 1. 필요 │──▶│ 2. 생성 │──▶│ 3. 테스트│──▶│ 4. 개선 │     │
│  │   파악  │   │         │   │         │   │         │     │
│  └─────────┘   └─────────┘   └─────────┘   └────┬────┘     │
│                                                 │          │
│                                          ┌─────▼─────┐    │
│                                          │ 5. 공유   │    │
│                                          └───────────┘    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## Phase 1: 필요 파악

### 1.1 반복 패턴 식별

Skill 없이 작업을 수행하면서 반복되는 패턴을 찾습니다:

```
자문해볼 질문:
- 같은 컨텍스트를 반복 제공하고 있는가?
- 특정 규칙을 매번 설명하고 있는가?
- 팀에서 일관된 방식이 필요한 작업이 있는가?
```

### 1.2 예시: BigQuery 분석 작업

```
반복되는 컨텍스트:
□ 테이블 스키마 설명
□ 네이밍 컨벤션 안내
□ 테스트 계정 필터링 규칙
□ 공통 쿼리 패턴

→ Skill로 만들면 좋겠다!
```

### 1.3 Skill 필요성 체크리스트

| 질문 | 예 = Skill 필요 |
|------|-----------------|
| 같은 정보를 3번 이상 제공했는가? | ✓ |
| 팀 전체가 같은 방식을 따라야 하는가? | ✓ |
| 복잡한 도메인 지식이 필요한가? | ✓ |
| 특정 출력 형식이 필요한가? | ✓ |

---

## Phase 2: Skill 생성

### 2.1 Claude에게 초안 요청

```
프롬프트 예시:

"방금 우리가 수행한 BigQuery 분석 패턴을 Skill로 만들어줘.
포함할 내용:
- finance, sales, product 테이블 스키마
- 일반적인 네이밍 컨벤션
- 테스트 계정 필터링 규칙
- 공통 쿼리 패턴

SKILL.md는 300줄 이하로, 상세 스키마는 별도 파일로 분리해줘."
```

### 2.2 생성된 초안 검토

```markdown
검토 항목:
□ name이 적절한가? (동명사 형태, 소문자-하이픈)
□ description이 충분히 구체적인가?
□ 트리거 키워드가 포함되어 있는가?
□ 내용이 간결한가? (불필요한 설명 제거)
□ 예제가 바로 실행 가능한가?
```

### 2.3 파일 구조 결정

```bash
# 단순한 Skill
bigquery-analysis/
└── SKILL.md

# 복잡한 Skill (도메인별 분리)
bigquery-analysis/
├── SKILL.md
└── schemas/
    ├── finance.md
    ├── sales.md
    └── product.md
```

### 2.4 Skill 파일 생성

```bash
# 디렉토리 생성
mkdir -p ~/.claude/skills/bigquery-analysis/schemas

# SKILL.md 생성 (Claude가 생성한 내용 저장)
# 또는 직접 편집기로 작성

# Claude Code 재시작
claude
```

---

## Phase 3: 테스트

### 3.1 로드 확인

```
Claude Code 내에서:

> "사용 가능한 Skill 목록을 보여줘"

확인:
□ bigquery-analysis가 목록에 있는가?
□ description이 올바르게 표시되는가?
```

### 3.2 트리거 테스트

```
실제 사용자 질문처럼 물어보기:

> "이번 달 매출 데이터를 BigQuery에서 조회해줘"

확인:
□ Skill이 자동으로 선택되는가?
□ Skill 사용 승인을 요청하는가?
```

### 3.3 기능 테스트

```
승인 후 동작 확인:

□ 지침을 올바르게 따르는가?
□ 예제가 정확한가?
□ 참조 파일을 올바르게 로드하는가?
□ 출력 형식이 의도한 대로인가?
```

### 3.4 다양한 모델에서 테스트

| 모델 | 테스트 결과 | 조치 |
|------|------------|------|
| Haiku | 지침을 잘 따르는가? | 명확성 필요하면 개선 |
| Sonnet | 일반 케이스 동작 | 기본 테스트 |
| Opus | 복잡한 케이스 | 고급 기능 테스트 |

### 3.5 테스트 케이스 문서화

```markdown
## 테스트 케이스

### TC1: 기본 쿼리
- 입력: "이번 달 매출 조회"
- 기대: finance 스키마 참조, 테스트 계정 필터링 포함
- 결과: [PASS/FAIL]

### TC2: 크로스 도메인
- 입력: "매출과 사용자 활동 상관관계"
- 기대: finance + product 스키마 참조
- 결과: [PASS/FAIL]

### TC3: 엣지 케이스
- 입력: "작년 데이터 비교"
- 기대: 날짜 범위 처리 안내
- 결과: [PASS/FAIL]
```

---

## Phase 4: 반복 개선

### 4.1 관찰 기록

```markdown
## 관찰 로그

### 세션 1: 2024-01-15
- 쿼리: 월별 매출 추이
- 문제: 연도 필터 누락
- 조치: 날짜 범위 예제 추가

### 세션 2: 2024-01-16
- 쿼리: 팀별 성과
- 문제: sales 스키마 참조 안 됨
- 조치: description에 "team performance" 키워드 추가
```

### 4.2 Claude A-B 개선 루프

```
1. Claude A (Skill Creator)
   └─> 초기 Skill 생성

2. Claude B (Skill User) - 실제 작업
   └─> 관찰 및 문제점 파악

3. Claude A에게 개선 요청
   └─> "이런 문제가 있었어, 개선해줘"

4. 개선 적용
   └─> SKILL.md 수정

5. 반복
```

### 4.3 버전 관리

```bash
# Git으로 변경 이력 관리
cd ~/.claude/skills/bigquery-analysis
git init
git add .
git commit -m "v1.0: initial skill"

# 개선 후
git add .
git commit -m "v1.1: add date range examples"
```

### 4.4 일반적인 개선 사항

| 문제 | 해결책 |
|------|--------|
| Skill이 트리거되지 않음 | description에 키워드 추가 |
| 지침을 따르지 않음 | 더 명확한 단계별 지침 |
| 참조 파일 미로드 | SKILL.md에서 링크 명확히 |
| 출력 형식 불일치 | 템플릿 예제 추가 |

---

## Phase 5: 공유

### 5.1 프로젝트 Skill로 이동

```bash
# Personal에서 Project로 복사
cp -r ~/.claude/skills/bigquery-analysis .claude/skills/

# 버전 관리에 추가
git add .claude/skills/bigquery-analysis
git commit -m "feat(skills): add BigQuery analysis skill"
```

### 5.2 팀 문서화

```markdown
# BigQuery Analysis Skill

## 개요
BigQuery 데이터 분석을 위한 Skill입니다.

## 사용법
"BigQuery에서 매출 데이터 조회해줘" 같은 질문을 하면
자동으로 활성화됩니다.

## 포함된 스키마
- finance: 매출, 청구, 이탈
- sales: 파이프라인, 기회
- product: API 사용량, 채택

## 주의사항
- 항상 테스트 계정이 필터링됩니다
- 대량 쿼리 시 LIMIT 사용 권장

## 피드백
이슈나 개선 제안은 #data-team 채널로
```

### 5.3 팀 피드백 수집

```
피드백 채널:
- Slack 채널
- GitHub Issues
- 정기 회의

수집 항목:
- 동작하지 않는 케이스
- 추가가 필요한 기능
- 불필요한 부분
- 다른 팀의 니즈
```

### 5.4 지속적 개선

```
주간 리뷰:
□ 새로운 피드백 확인
□ 테스트 케이스 추가
□ 문서 업데이트
□ 버전 태깅
```

---

## 실전 워크플로우 예시

### 예시: PDF Processing Skill 개발

#### Day 1: 필요 파악

```
작업 기록:
- PDF에서 텍스트 추출 3회
- 폼 필드 분석 2회
- 매번 pdfplumber 설치 안내

결론: PDF 처리 Skill 필요
```

#### Day 2: 초안 생성

```
Claude에게 요청:
"지난 며칠간 수행한 PDF 작업 패턴으로 Skill 만들어줘"

결과:
- SKILL.md 생성
- scripts/ 폴더에 유틸리티 스크립트
- FORMS.md에 상세 가이드
```

#### Day 3-4: 테스트

```
테스트 케이스:
1. 단순 텍스트 추출 - PASS
2. 테이블 추출 - PASS
3. 폼 필드 분석 - 개선 필요
4. 한글 처리 - 폰트 가이드 추가 필요
```

#### Day 5: 개선

```
수정 사항:
- 폼 필드 분석 워크플로우 상세화
- 한글 폰트 설정 가이드 추가
- 에러 처리 케이스 추가
```

#### Day 6: 공유

```
- .claude/skills/에 이동
- README 작성
- 팀 채널에 공유
- 피드백 수집 시작
```

---

## 체크리스트 요약

### 생성 전

- [ ] 반복 패턴을 3회 이상 관찰
- [ ] Skill로 만들 가치가 있는지 확인
- [ ] 유사한 기존 Skill 없는지 확인

### 생성 시

- [ ] name이 네이밍 규칙을 따름
- [ ] description이 구체적이고 키워드 포함
- [ ] 내용이 간결함 (500줄 이하)
- [ ] 예제가 실행 가능함

### 테스트 시

- [ ] 로드 확인
- [ ] 트리거 테스트
- [ ] 다양한 모델에서 테스트
- [ ] 엣지 케이스 확인

### 공유 시

- [ ] 프로젝트 Skill로 이동
- [ ] 문서화 완료
- [ ] 팀에 공유
- [ ] 피드백 채널 설정
