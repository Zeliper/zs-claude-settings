# Agent 개요

## Agent란 무엇인가?

**Agent**는 Claude Code에서 특정 작업을 처리하는 전문화된 AI 어시스턴트입니다. 메인 대화와 별도의 컨텍스트 윈도우에서 독립적으로 작업을 수행합니다.

### 핵심 특징

| 특징 | 설명 |
|------|------|
| **격리된 컨텍스트** | 각 Agent는 자체 컨텍스트 윈도우에서 동작 |
| **전문화** | 특정 목적과 전문성을 가진 에이전트 |
| **도구 구성** | 필요한 도구만 접근 가능하도록 설정 |
| **커스텀 프롬프트** | 행동을 안내하는 시스템 프롬프트 |
| **재사용성** | 프로젝트 간 공유 및 팀 협업 가능 |

## Agent와 Sub-Agent의 관계

```
┌─────────────────────────────────────────────────────────────┐
│                    메인 Claude Code                          │
│                    (Primary Agent)                          │
└───────────────────────────┬─────────────────────────────────┘
                            │
                            │ Task Tool 사용
                            │
        ┌───────────────────┼───────────────────┐
        │                   │                   │
        ▼                   ▼                   ▼
┌───────────────┐   ┌───────────────┐   ┌───────────────┐
│  Sub-Agent 1  │   │  Sub-Agent 2  │   │  Sub-Agent 3  │
│   (Explore)   │   │    (Plan)     │   │   (Custom)    │
│               │   │               │   │               │
│ 자체 컨텍스트  │   │ 자체 컨텍스트  │   │ 자체 컨텍스트  │
└───────────────┘   └───────────────┘   └───────────────┘
```

### 메인 Agent
- Claude Code 자체
- 사용자와 직접 대화
- Sub-Agent에 작업 위임

### Sub-Agent
- 특정 작업을 위해 생성되는 보조 Agent
- 메인 Agent가 Task 도구로 호출
- 작업 완료 후 결과 반환

## 내장 Sub-Agent 유형

Claude Code에는 다음과 같은 내장 Sub-Agent가 있습니다:

### 1. General-Purpose Agent

**용도**: 복잡한 멀티스텝 작업, 탐색과 실행이 모두 필요한 작업

```
> "프로젝트에서 사용하지 않는 import를 모두 찾아서 정리해줘"
```

**특징**:
- 모든 도구 접근 가능
- 탐색과 수정 모두 가능
- 범용적인 작업에 적합

### 2. Explore Agent

**용도**: 코드베이스 빠른 탐색, 파일 검색, 코드 검색

```
> "API 엔드포인트가 어디에 정의되어 있어?"
> "사용자 인증 로직이 어떻게 동작해?"
```

**특징**:
- 읽기 전용 도구만 사용 (Read, Grep, Glob)
- 빠르고 가벼움
- 컨텍스트 효율적

### 3. Plan Agent

**용도**: 구현 전략 설계, 아키텍처 계획

```
> "이 기능을 구현하려면 어떻게 해야 할까?"
```

**특징**:
- 리서치 중심
- 코드 수정 없음
- 계획 및 설계 산출

### 4. Custom Agent

**용도**: 사용자가 정의한 특화 작업

```
> "우리 팀의 코드 리뷰 표준으로 리뷰해줘"
```

**특징**:
- 사용자 정의 프롬프트
- 선택적 도구 접근
- 도메인 특화 가능

## Agent 파일 위치

| 위치 | 경로 | 스코프 |
|------|------|--------|
| **Project** | `.claude/agents/*.md` | 팀 공유, 버전 관리 |
| **User** | `~/.claude/agents/*.md` | 개인용, 프로젝트 간 사용 |

### 우선순위
프로젝트 레벨 Agent가 동일 이름의 사용자 레벨 Agent를 오버라이드합니다.

## Agent 관리 명령어

```bash
# Agent 목록 보기
> /agents

# 대화형 관리 인터페이스 열기
> /agents

# Claude에게 Agent 생성 요청
> "코드 리뷰를 위한 새 agent를 만들어줘"
```

## Agent vs Skills vs MCP

| 기능 | 용도 | 특징 |
|------|------|------|
| **Agent** | 작업 위임 | 독립 컨텍스트, 복잡한 작업 |
| **Skills** | 지식 주입 | 자동 발견, 도메인 지식 |
| **MCP** | 외부 연결 | API/서비스 통합 |

### 사용 시나리오

**Agent가 적합한 경우**:
- 복잡한 멀티스텝 작업
- 병렬 처리가 필요한 작업
- 특화된 전문성이 필요한 작업
- 메인 컨텍스트 보존이 중요한 작업

**Skills가 적합한 경우**:
- 도메인 지식 제공
- 반복적인 패턴 적용
- 자동 발견이 필요한 경우

**MCP가 적합한 경우**:
- 외부 서비스 연동
- 데이터베이스 쿼리
- 클라우드 서비스 접근

## Agent 동작 방식

```
1. 메인 Agent가 작업 수신
   └─> "이 PR을 리뷰해줘"

2. Task 도구로 Sub-Agent 호출
   └─> Task(subagent_type: "code-reviewer", prompt: "PR #123 리뷰")

3. Sub-Agent가 독립 컨텍스트에서 작업
   └─> 코드 읽기, 분석, 결과 생성

4. 결과를 메인 Agent에 반환
   └─> "PR 리뷰 완료: 3개의 개선 사항 발견..."

5. 메인 Agent가 사용자에게 응답
   └─> 결과 요약 및 전달
```

## 다음 단계

1. [Sub-Agent 상세](02-sub-agents.md) - Sub-Agent 설정 방법
2. [병렬 처리](03-parallel-processing.md) - 동시 실행 패턴
3. [베스트 프랙티스](04-best-practices.md) - Agent 설계 원칙
